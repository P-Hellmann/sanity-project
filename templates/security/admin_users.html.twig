{% extends 'base.html.twig' %}

{% block title %}Admin Users{% endblock %}

{% block body %}
    <style>
        main {
            height: fit-content !important;
        }
    </style>
    <body>
    <header>
        <h1>Sanity shop</h1>
    </header>
    <main>
        <img src="{{ asset('images/logo.png') }}" alt="Sanity Shop Logo" class="banner">
        <h2>Admin User List</h2>
        {{ form(searchbar) }}<br>
        <section>
            <strong> Users: </strong><br><br>
            {% for user in users %}
                <p><strong>ID:</strong> {{ user.id }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Roles:</strong>
                    {% for role in user.roles %}
                    {{ role }}
                    {% endfor %}
                </p>
                <p><strong>Orders:</strong><br>
                    {% for order in user.orders %}
                        ID: {{ order.id }}<br>
                        Address: {{ order.address }}<br>
                        Phone: 0{{ order.phone }}<br>
                        First Name: {{ order.firstName }}<br>
                        Last Name: {{ order.lastName }}<br>
                        Email: {{ order.email }}<br>
                        Total price: ${{ order.totalPrice }}<br>
                        items:<br> {% for item in order.items["items"] %}
                        - {{ item.product_name }} x{{ item.quantity }}
                        {% endfor %}<br>
                        Date of Order: {{ order.dateOfOrder|date('d-m-Y H:i') }}
                        <br>
                        ------
                    {% endfor %}</p>
                <hr>
            {% endfor %}
        </section>
        <br>
        <a href="{{ path('app_admin') }}" class="btn-primary">Back to Panel</a>
    </main>
    </body>
{% endblock %}
